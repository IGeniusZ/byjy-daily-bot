name: 📝 日报提醒（单休 · 炫酷趣味版）

on:
  schedule:
    - cron: '0 9 * * 1-6'   # UTC 9:00 = 北京时间 17:00，周一至周六
  workflow_dispatch:

jobs:
  daily-report:
    runs-on: ubuntu-latest
    steps:
      - name: 🌈 发送炫酷日报提醒
        env:
          WECHAT_KEY: ${{ secrets.WECHAT_BOT_KEY }}
        run: |
          # === 获取日期和星期 ===
          DATE_STR=$(date '+%m月%d日')
          WEEKDAY=$(date '+%u')
          case $WEEKDAY in
            1) CN_DAY="周一" ;;
            2) CN_DAY="周二" ;;
            3) CN_DAY="周三" ;;
            4) CN_DAY="周四" ;;
            5) CN_DAY="周五" ;;
            6) CN_DAY="周六" ;;
          esac

          # === 全新 200 条趣味/打工人专属文案（无重复）===
          REPORT_QUOTES=(
            "别让日报等到 18:59 才开始写！"
            "今日份的摸鱼额度已用完，请速填日报～"
            "你的日报，是项目经理的续命药💊"
            "写日报不是任务，是给未来的自己留证据！"
            "今天又修了几个 bug？快记下来！"
            "日报写得好，周末回家早！"
            "别等 deadline 追着你跑，现在就写！"
            "你的日报，正在被老板偷偷点赞👍"
            "今日成就：活着 + 写日报 = 双倍快乐"
            "日报不写，明日重演；日报一写，功德+1"
            "快！趁记忆还在，赶紧记下今天干了啥"
            "日报是打工人最后的倔强💪"
            "你今天的努力，值得被记录！"
            "别让日报变成‘回忆录’，现在就动笔！"
            "日报写完，摸鱼心安～"
            "今日KPI：活着 + 写日报 = ✅"
            "你的日报，是团队前进的灯塔！"
            "别拖了！再拖就要用‘脑补日报法’了"
            "日报不是负担，是成长的脚印👣"
            "快写！不然明天又要编‘昨天我做了什么’"
            "今日工作已结束，日报请收尾～"
            "你的日报，比朋友圈更值得认真对待"
            "别让日报等到夜深人静才想起"
            "日报写得好，升职加薪少不了💰"
            "今日份小目标：写完日报，准时下班！"
            "日报是打工人对抗遗忘的武器🛡️"
            "快！趁脑子还记得，赶紧写！"
            "你的日报，正在拯救项目进度！"
            "别等别人催，主动写日报才是真大佬"
            "日报写完，世界清净～"
            "今日战绩如何？快用日报封存！"
            "日报不是形式，是对自己负责"
            "快写！不然今晚梦里全是未提交的日报"
            "你的日报，是明天站会的底气！"
            "别让日报变成‘年度总结’的一部分"
            "今日努力，值得被文字铭记✨"
            "日报写得好，bug 都绕道走"
            "快！趁灵感还在，速速提交"
            "你的日报，是团队的知识资产📚"
            "别拖！拖延症晚期患者慎入"
            "日报写完，摸鱼理直气壮😎"
            "今日工作已封盘，请提交战报！"
            "你的日报，比咖啡更能提神☕"
            "快写！不然明天又要靠想象力补全"
            "日报是打工人的时间胶囊⏳"
            "别等 18:59 手忙脚乱，现在就优雅提交"
            "今日份成就感：来自一份完整的日报✅"
            "你的日报，正在被宇宙悄悄记录🌌"
            "快！趁记忆新鲜，速速落笔"
            "日报写得好，周报不用愁"
            "别让日报成为‘薛定谔的任务’"
            "今日工作已落幕，日报请画句号～"
            "你的日报，是未来自己的感谢信💌"
            "快写！不然今晚的梦会提醒你"
            "日报不是负担，是职业素养的体现"
            "别拖！再拖就要用‘量子波动速写’了"
            "今日成果，值得被认真记录📝"
            "你的日报，是团队协作的桥梁🌉"
            "快！趁思路清晰，一气呵成"
            "日报写完，下班理直气壮🚶‍♂️"
            "今日份小确幸：写完日报，一身轻松～"
            "别让日报等到明天变成‘考古’"
            "你的日报，比天气预报更值得信赖🌤️"
            "快写！不然项目经理要开始念经了🙏"
            "日报是打工人对抗混沌的秩序之光💡"
            "今日工作已收官，请提交你的高光时刻✨"
            "别拖！拖延只会让日报变得更难写"
            "你的日报，正在为年终总结铺路🛣️"
            "快！趁细节还在脑海，速速保存"
            "日报写得好，摸鱼没烦恼😌"
            "今日努力，不该被遗忘在工位上"
            "别等别人问‘日报呢？’，主动出击！"
            "你的日报，是职场信用的积累📈"
            "快写！不然今晚的星星会替你着急🌟"
            "日报不是任务，是自我复盘的机会🔄"
            "今日战绩，请用文字封存⚔️"
            "别让日报变成‘紧急抢救项目’"
            "你的日报，比闹钟更能唤醒责任感⏰"
            "快！趁热情未退，速速提交"
            "日报写完，世界都安静了🧘‍♀️"
            "今日份成就：活着 + 写日报 = 圆满"
            "别拖！再拖就要启动‘脑内编译器’了"
            "你的日报，是团队前进的燃料🚀"
            "快写！不然明天又要靠玄学回忆"
            "日报是打工人留给世界的痕迹👣"
            "今日工作已结束，请为它画上句点。"
            "别让日报等到深夜才想起它的存在"
            "你的日报，比奶茶更能带来满足感🧋"
            "快！趁记忆鲜活，赶紧记录"
            "日报写得好，周末睡得早😴"
            "今日努力，值得被文字温柔以待"
            "别拖！拖延是日报最大的敌人"
            "你的日报，正在为未来减负📦"
            "快写！不然今晚的月亮会替你着急🌙"
            "日报不是形式主义，是专业体现"
            "今日成果，请用日报郑重收藏🏆"
            "别让日报变成‘年度悬案’"
            "你的日报，比导航更能指引方向🧭"
            "快！趁思路连贯，一鼓作气"
            "日报写完，摸鱼心安理得🐟"
            "今日份小目标达成：提交日报✅"
            "别拖！再拖就要用‘意念传输法’了"
            "你的日报，是职场成长的年轮🌳"
            "快写！不然明天又要靠运气补全"
            "日报是打工人对抗失忆的盾牌🛡️"
            "今日工作已落幕，请留下你的印记🖋️"
            "别让日报等到明天变成‘历史谜题’"
            "你的日报，比闹钟更能叫醒责任心🔔"
            "快！趁细节清晰，速速落笔"
            "日报写得好，bug 自动绕道🐞"
            "今日努力，不该随下班消失"
            "别等催，主动写日报才是王者👑"
            "你的日报，是团队知识的宝藏💎"
            "快写！不然今晚的风会替你叹息🌬️"
            "日报不是负担，是自我对话的仪式🕯️"
            "今日战绩，请用文字永久保存💾"
            "别拖！拖延只会让日报变得更沉重"
            "你的日报，正在为明年铺路🛤️"
            "快！趁热情尚在，速速提交"
            "日报写完，世界都明亮了✨"
            "今日份圆满：写完日报，准备下班～"
            "别让日报等到深夜才敲响警钟"
            "你的日报，比咖啡因更能提神☕"
            "快写！不然明天又要靠想象力续命"
            "日报是打工人留给明天的礼物🎁"
            "今日工作已封盘，请提交你的战报📜"
            "别拖！再拖就要启动‘时空回溯术’了"
            "你的日报，是职场信用的基石🏛️"
            "快！趁记忆完整，赶紧记录"
            "日报写得好，摸鱼更香😋"
            "今日努力，值得被认真书写✍️"
            "别等问，主动交日报才是高手🎯"
            "你的日报，比地图更能指引前路🗺️"
            "快写！不然今晚的星星会为你点亮催更灯🌟"
            "日报不是任务，是成长的见证📸"
            "今日成果，请用日报郑重封存🔒"
            "别让日报变成‘未解之谜’"
            "你的日报，比指南针更能找到方向🧭"
            "快！趁思路清晰，一气呵成"
            "日报写完，下班理直气壮😎"
            "今日份小确幸：提交日报，一身轻松～"
            "别拖！再拖就要用‘心灵感应法’了"
            "你的日报，是团队前进的灯塔🗼"
            "快写！不然明天又要靠玄学补全"
            "日报是打工人对抗遗忘的时光机⏳"
            "今日工作已结束，请为它画上完美句号。"
            "别让日报等到深夜才想起它的使命"
            "你的日报，比奶茶更能带来幸福感🧋"
            "快！趁记忆新鲜，速速保存"
            "日报写得好，周末睡得香😴"
            "今日努力，值得被文字温柔铭记"
            "别拖！拖延是日报的头号公敌"
            "你的日报，正在为未来减压🎈"
            "快写！不然今晚的月亮会替你着急🌙"
            "日报不是形式，是专业的体现💼"
            "今日战绩，请用日报永久珍藏🏆"
            "别让日报变成‘历史悬案’"
            "你的日报，比导航更能指引职业方向🧭"
            "快！趁思路连贯，一鼓作气"
            "日报写完，摸鱼心安理得🐠"
            "今日份成就：活着 + 写日报 = 完美"
            "别拖！再拖就要启动‘意念传输’了"
            "你的日报，是职场成长的年轮🌲"
            "快写！不然明天又要靠运气回忆"
            "日报是打工人对抗失忆的护身符📿"
            "今日工作已落幕，请留下你的高光时刻✨"
            "别让日报等到明天变成‘考古现场’"
            "你的日报，比闹钟更能唤醒责任感⏰"
            "快！趁细节清晰，速速落笔"
            "日报写得好，bug 绕道走🐞"
            "今日努力，不该随下班烟消云散"
            "别等催，主动写日报才是真·打工人🔥"
          )

          # 随机选一条
          RANDOM_INDEX=$((RANDOM % ${#REPORT_QUOTES[@]}))
          quote="${REPORT_QUOTES[$RANDOM_INDEX]}"
          author="日报小精灵"
          quote_safe=$(printf '%s' "$quote" | sed 's/"/\\"/g')

          # === 日报填写链接（已转义特殊字符）===
          REPORT_URL="https://doc.weixin.qq.com/journal/create?docid=c2_AA4AkQcZAA4AZkAQgaIALoCNlqm1N8Lpj_fork"

          # === 发送炫酷 Markdown 消息（含可点击链接）===
          curl -s -X POST \
            "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=$WECHAT_KEY" \
            -H 'Content-Type: application/json' \
            -d '{
              "msgtype": "markdown",
              "markdown": {
                "content": "📝 <font color=\"info\">────── ⏰ 日报时间到！──────</font>\n\n📌 **今日**：'$DATE_STR'（'$CN_DAY'）\n🕒 **截止**：<font color=\"warning\">19:00 前提交</font>\n\n💬 <font color=\"comment\">“'$quote_safe'”</font>\n> —— '$author'\n\n🔗 [✅ 立即填写日报]('$REPORT_URL')\n\n✨ <font color=\"info\">快动笔吧！你的日报，值得被认真对待～</font>\n\n@all"
              }
            }' >/dev/null || true

          exit 0
