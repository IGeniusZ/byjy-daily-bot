name: ğŸŒ™ ä¸‹ç­æ‰“å¡æé†’ï¼ˆå•ä¼‘ç‰ˆï¼‰

on:
  schedule:
    - cron: '0 11 * * *'
  workflow_dispatch:

jobs:
  off-duty:
    runs-on: ubuntu-latest
    steps:
      - name: Send Reminder
        env:
          WECHAT_KEY: ${{ secrets.WECHAT_BOT_KEY }}
        run: |
          d=$(date '+%mæœˆ%dæ—¥')
          w=$(date '+%u')
          case $w in 1) wd=å‘¨ä¸€;; 2) wd=å‘¨äºŒ;; 3) wd=å‘¨ä¸‰;; 4) wd=å‘¨å››;; 5) wd=å‘¨äº”;; 6) wd=å‘¨å…­;; *) wd=å‘¨æ—¥;; esac
          if [ "$wd" = "å‘¨å…­" ]; then
            bonus="ğŸŒˆ <font color=\"warning\">âœ¨ å‘¨å…­ä¸Šç­è¾›è‹¦å•¦ï¼</font>\\n> åŒå€å¥¶èŒ¶å¥–åŠ±ï¼"
          else
            bonus=""
          fi
          curl -s -X POST "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=$WECHAT_KEY" \
            -H 'Content-Type: application/json' \
            -d '{"msgtype":"markdown","markdown":{"content":"ğŸŒ™ <font color=\"info\">â”€â”€â”€â”€â”€â”€ â° ä¸‹ç­æ—¶é—´åˆ°ï¼â”€â”€â”€â”€â”€â”€</font>\\n\\nğŸ“Œ **ä»Šæ—¥**ï¼š'$d'ï¼ˆ'$wd'ï¼‰\\nğŸ“ **ä»»åŠ¡**ï¼š<font color=\"warning\">âœ… æ‰“å¡ + æäº¤æ—¥æŠ¥</font>\\n\\nğŸ’¬ <font color=\"comment\">â€œä»Šå¤©ä¹Ÿè¦å¥½å¥½ä¼‘æ¯å‘€ï½â€</font>\\n> â€”â€” æš–å¿ƒå°åŠ©æ‰‹\\n\\n'$bonus'\\n\\nğŸ€ <font color=\"info\">å¿«å»æ‰“å¡å§ï¼</font>\\n\\n[ğŸšª ç«‹å³æ‰“å¡](https://byjyedu.yuque.com/org-wiki-byjyedu-bxo6fa/bmqx33/gz2ixgatwha0u07k)\\n\\n@all"}}' >/dev/null || true
          exit 0
