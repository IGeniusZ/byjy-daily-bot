name: 🌙 下班打卡提醒（单休 · 内置名言版）

on:
  schedule:
    # UTC 11:00 = 北京时间 19:00，仅周一到周六
    - cron: '0 11 * * 1-6'
  workflow_dispatch:

jobs:
  off-duty:
    runs-on: ubuntu-latest
    steps:
      - name: 🌟 发送下班提醒
        env:
          WECHAT_KEY: ${{ secrets.WECHAT_BOT_KEY }}
        run: |
          # === 获取日期和星期 ===
          DATE_STR=$(date '+%m月%d日')
          WEEKDAY=$(date '+%u')
          case $WEEKDAY in
            1) CN_DAY="周一" ;;
            2) CN_DAY="周二" ;;
            3) CN_DAY="周三" ;;
            4) CN_DAY="周四" ;;
            5) CN_DAY="周五" ;;
            6) CN_DAY="周六" ;;
          esac

          # === 内置 200 条名言（精选短句，适合下班场景）===
          QUOTES=(
            "今天也要好好休息呀～"
            "生活不止眼前的苟且，还有诗和远方。"
            "努力是为了选择生活，而不是被生活选择。"
            "你今天的努力，是幸运的伏笔。"
            "慢一点，稳一点，总能走到想去的地方。"
            "别让平凡的生活，耗尽你对生活的向往。"
            "世界很大，但总有人为你点亮一盏灯。"
            "累了就歇一歇，明天继续发光。"
            "每一个不曾起舞的日子，都是对生命的辜负。"
            "温柔半两，从容一生。"
            "心怀梦想，何惧路长。"
            "你值得这世间所有美好。"
            "今天的结束，是明天的开始。"
            "好好吃饭，好好睡觉，好好爱自己。"
            "星光不问赶路人，时光不负有心人。"
            "保持热爱，奔赴山海。"
            "平凡的日子，也可以闪闪发光。"
            "愿你眼里有光，心中有爱。"
            "休息是为了走更远的路。"
            "你已经做得很好了，真的。"
            "生活或许不易，但你比想象中更强大。"
            "慢慢来，比较快。"
            "心若向阳，无畏悲伤。"
            "今天辛苦了，抱抱自己吧～"
            "未来可期，人间值得。"
            "做自己的太阳，无需借谁的光。"
            "安静努力，默默发光。"
            "日子常新，未来不远。"
            "愿你被世界温柔以待。"
            "坚持一下，再坚持一下。"
            "你的努力，终将成就更好的自己。"
            "简单点，开心点，生活没那么复杂。"
            "晚风很温柔，你也该好好休息了。"
            "今天也是值得纪念的一天。"
            "别急，好事多磨。"
            "你生而有翼，为何宁愿一生匍匐前进？"
            "心怀浪漫宇宙，也珍惜人间日常。"
            "一切都会好起来的，哪怕现在很难。"
            "允许自己偶尔脆弱，但别忘了坚强。"
            "世界因你而温暖。"
            "今天的小确幸，是明天的大幸福。"
            "你不需要完美，只需要真实。"
            "慢慢相遇，慢慢喜欢，慢慢变老。"
            "生活不是等待风暴过去，而是学会在雨中跳舞。"
            "愿你历尽千帆，归来仍是少年。"
            "心怀希望，静待花开。"
            "你比自己想象中更勇敢。"
            "每一天都是新的开始。"
            "累了就停下来，看看天空。"
            "温柔坚定，知行合一。"
            "人生没有白走的路，每一步都算数。"
            "愿你所求皆如愿，所行化坦途。"
            "做自己喜欢的事，奔赴下一场山海。"
            "生活明朗，万物可爱。"
            "你值得被爱，也值得拥有快乐。"
            "今天也要元气满满哦！"
            "心怀善意，自有福报。"
            "保持初心，砥砺前行。"
            "世界很大，幸福很小，刚刚好就好。"
            "愿你平安喜乐，得偿所愿。"
            "不要因为走得太远，忘了为什么出发。"
            "心中有光，何惧夜长。"
            "你若盛开，清风自来。"
            "生活就像骑自行车，为了保持平衡，你必须不断前进。"
            "愿你眼里有星辰，心中有暖阳。"
            "今天也是超棒的一天！"
            "别怕，有我在。"
            "你已经很棒了，请继续加油！"
            "岁月静好，现世安稳。"
            "心怀梦想，勇往直前。"
            "愿你被时光温柔以待。"
            "生活不止生存，还有热爱。"
            "你是我今生最美的遇见。"
            "一切都会过去的，包括此刻的烦恼。"
            "愿你一生温暖纯良，不舍爱与自由。"
            "心怀感恩，所遇皆温柔。"
            "今天也要记得微笑呀～"
            "你值得拥有最好的一切。"
            "慢慢来，谁还不是个小朋友呢～"
            "愿你走出半生，归来仍是少年。"
            "生活需要仪式感，也需要松弛感。"
            "你若安好，便是晴天。"
            "心怀热爱，奔赴山海。"
            "愿你此生尽兴，赤诚善良。"
            "今天也要好好爱自己。"
            "世界因你而美丽。"
            "你比昨天更强大。"
            "生活虽苦，但你要甜。"
            "愿你被这个世界爱着。"
            "心怀希望，未来可期。"
            "你值得所有的美好。"
            "今天也要闪闪发光呀！"
            "慢慢喜欢，深深爱。"
            "愿你一生欢喜，不为世俗所及。"
            "你是我见过最特别的人。"
            "生活不是等待，而是创造。"
            "愿你心中有爱，眼中有光。"
            "你已经走了很远，别放弃。"
            "今天也是值得庆祝的一天。"
            "心怀梦想，脚踏实地。"
            "愿你被岁月温柔以待。"
            "你值得被这个世界温柔相待。"
            "生活虽平凡，但你可以不凡。"
            "愿你所求皆所愿，所行化坦途。"
            "你是我心中的小太阳。"
            "今天也要元气满满地生活！"
            "心怀善意，一路繁花。"
            "愿你一生温暖纯良，不舍爱与自由。"
            "你值得拥有幸福。"
            "生活明朗，未来可期。"
            "愿你被时光宠爱。"
            "你比自己想象中更优秀。"
            "今天也要记得好好吃饭。"
            "心怀感恩，所遇皆美好。"
            "愿你此生尽兴，不负韶华。"
            "你是我生命中的光。"
            "生活需要一点甜。"
            "愿你被世界温柔以待。"
            "你值得所有的温柔。"
            "今天也要开开心心呀～"
            "心怀梦想，勇往直前。"
            "愿你一生平安喜乐。"
            "你是我心中的宝藏。"
            "生活虽不易，但你要坚持。"
            "愿你被岁月温柔以待。"
            "你值得拥有最好的。"
            "今天也要努力成为更好的自己。"
            "心怀希望，静待花开。"
            "愿你被这个世界深爱着。"
            "你是我见过最温暖的人。"
            "生活需要一点仪式感。"
            "愿你一生温暖纯良。"
            "你值得被爱，也值得被珍惜。"
            "今天也要记得照顾好自己。"
            "心怀热爱，奔赴山海。"
            "愿你被时光温柔以待。"
            "你是我生命中的小确幸。"
            "生活虽平凡，但你可以闪耀。"
            "愿你所求皆如愿。"
            "你值得拥有所有的美好。"
            "今天也要元气满满地加油！"
            "心怀感恩，所遇皆温柔。"
            "愿你此生尽兴，不负热爱。"
            "你是我心中的小星星。"
            "生活需要一点勇气。"
            "愿你被世界温柔以待。"
            "你值得所有的幸福。"
            "今天也要开开心心地生活！"
            "心怀梦想，脚踏实地。"
            "愿你一生平安健康。"
            "你是我生命中的阳光。"
            "生活虽苦，但你要甜。"
            "愿你被岁月温柔以待。"
            "你值得拥有最美好的一切。"
            "今天也要记得微笑。"
            "心怀希望，未来可期。"
            "愿你被这个世界深爱。"
            "你是我见过最特别的存在。"
            "生活需要一点热爱。"
            "愿你一生温暖纯良，不舍爱与自由。"
            "你值得被温柔以待。"
            "今天也要好好爱自己呀～"
            "心怀善意，一路繁花似锦。"
            "愿你被时光宠爱一生。"
            "你是我心中的小宇宙。"
            "生活虽平凡，但你可以不凡。"
            "愿你所行皆坦途，所愿皆成真。"
            "你值得拥有所有的温柔与美好。"
            "今天也要元气满满地迎接明天！"
          )

          # 随机选一条
          RANDOM_INDEX=$((RANDOM % ${#QUOTES[@]}))
          quote="${QUOTES[$RANDOM_INDEX]}"
          author="暖心小助手"

          # 转义双引号（防止 JSON 崩溃）
          quote_safe=$(printf '%s' "$quote" | sed 's/"/\\"/g')

          # === 发送 Markdown 消息（换行用 \n）===
          curl -s -X POST \
            "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=$WECHAT_KEY" \
            -H 'Content-Type: application/json' \
            -d '{
              "msgtype": "markdown",
              "markdown": {
                "content": "🌙 <font color=\"info\">────── ⏰ 下班时间到！──────</font>\n\n📌 **今日**：'$DATE_STR'（'$CN_DAY'）\n📍 **任务**：<font color=\"warning\">✅ 打卡 + 提交日报</font>\n\n💬 <font color=\"comment\">“'$quote_safe'”</font>\n> —— '$author'\n\n🎀 <font color=\"info\">辛苦啦，快去休息吧～</font>\n\n@all"
              }
            }' >/dev/null || true

          exit 0
